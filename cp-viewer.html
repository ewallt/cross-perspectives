<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Reader | Cross Perspectives</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/dexie/dist/dexie.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:ital,wght@0,400;0,600;1,400&family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .font-serif { font-family: 'Crimson Pro', serif; }
        
        /* ProjectDeck-style Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #0f172a; } 
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #475569; }
    </style>
</head>
<body class="bg-[#0B1120] text-slate-300 flex h-screen overflow-hidden selection:bg-emerald-900 selection:text-white">

    <aside class="w-64 flex-shrink-0 border-r border-slate-800/60 bg-[#0F172A] flex flex-col">
        <div class="p-6 border-b border-slate-800/60">
            <h1 class="font-bold text-lg text-emerald-400 tracking-tight">Cross Perspectives</h1>
            <p class="text-[10px] text-slate-500 font-bold uppercase tracking-widest mt-1">Reader View</p>
        </div>
        
        <nav id="sidebar" class="flex-1 overflow-y-auto p-3 space-y-1"></nav>
        
        <div class="p-4 border-t border-slate-800/60 bg-slate-900/50">
             <a href="cp-hub.html" class="flex items-center gap-2 text-xs font-bold text-slate-400 hover:text-emerald-400 transition-colors uppercase tracking-widest justify-center">
                <span>‚Üê</span> Studio Hub
            </a>
        </div>
    </aside>

    <main class="flex-1 overflow-y-auto bg-[#0B1120] relative w-full" id="scroll-container">
        <div class="sticky top-0 z-10 bg-[#0B1120]/95 backdrop-blur border-b border-slate-800/60 px-8 py-4 flex justify-between items-center">
            <h2 id="view-title" class="text-xl text-slate-100 font-semibold">Library Overview</h2>
            <div class="text-xs text-slate-500 font-mono">Persistent Storage Active</div>
        </div>

        <div id="grid" class="max-w-5xl mx-auto p-8 space-y-6 pb-32"></div>
    </main>

    <script src="cp-config.js"></script>
    <script src="cp-store.js"></script>
    <script src="cp-renderers.js"></script>
    <script>
        const app = {
            active: null,
            async init() {
                await store.init();
                this.render();
            },
            async render() {
                // Render Sidebar
                document.getElementById('sidebar').innerHTML = CONFIG.VOICES.map(v => 
                    Renderers.voiceItem(v, this.active === v)
                ).join('');
                
                // Render Cards
                const data = this.active ? await store.getByVoice(this.active) : await store.getAll();
                document.getElementById('grid').innerHTML = data.length ? 
                    data.map(Renderers.insightCard).join('') : 
                    Renderers.emptyState();

                // Update Header Title
                document.getElementById('view-title').innerText = this.active || "All Perspectives";
            },
            filterBy(v) { 
                this.active = v; 
                this.render();
                document.getElementById('scroll-container').scrollTop = 0;
            }
        };
        app.init();
    </script>
</body>
</html>
