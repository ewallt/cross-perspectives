<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Reader | Cross Perspectives</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/dexie/dist/dexie.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    <style>
        .font-serif { font-family: 'Crimson Pro', serif; }
        /* Custom scrollbar for that premium feel */
        ::-webkit-scrollbar { width: 10px; }
        ::-webkit-scrollbar-track { background: #0f172a; } /* Slate-900 */
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 5px; } /* Slate-700 */
        ::-webkit-scrollbar-thumb:hover { background: #475569; }
    </style>
</head>
<body class="bg-slate-950 text-slate-300 flex h-screen overflow-hidden selection:bg-cyan-900 selection:text-white">

    <aside class="w-72 flex-shrink-0 border-r border-slate-800 flex flex-col bg-slate-900/50 backdrop-blur-sm">
        <div class="p-6 border-b border-slate-800">
            <h1 class="font-serif text-2xl italic text-sky-100 tracking-wide">Cross Perspectives</h1>
            <p class="text-xs text-slate-500 mt-1 uppercase tracking-widest font-bold">Reader View</p>
        </div>
        <nav id="sidebar" class="flex-1 overflow-y-auto p-4 space-y-1"></nav>
        <div class="p-4 border-t border-slate-800">
             <a href="cp-hub.html" class="block text-center text-xs text-slate-500 hover:text-cyan-400 transition-colors uppercase tracking-widest">
                &larr; Return to Studio
            </a>
        </div>
    </aside>

    <main class="flex-1 overflow-y-auto relative w-full" id="scroll-container">
        
        <div id="grid" class="max-w-3xl mx-auto p-12 pb-32"></div>

    </main>

    <script src="cp-config.js"></script>
    <script src="cp-store.js"></script>
    <script src="cp-renderers.js"></script>
    <script>
        const app = {
            active: null,
            async init() {
                await store.init();
                this.render();
            },
            async render() {
                // Sidebar Rendering
                document.getElementById('sidebar').innerHTML = CONFIG.VOICES.map(v => 
                    Renderers.voiceItem(v, this.active === v)
                ).join('');
                
                // Content Rendering
                const data = this.active ? await store.getByVoice(this.active) : await store.getAll();
                document.getElementById('grid').innerHTML = data.length ? 
                    data.map(Renderers.insightCard).join('') : 
                    Renderers.emptyState();
            },
            filterBy(v) { 
                this.active = v; 
                this.render();
                // Auto-scroll to top when switching voices
                document.getElementById('scroll-container').scrollTop = 0;
            }
        };
        app.init();
    </script>
</body>
</html>
